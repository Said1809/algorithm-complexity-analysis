# heapsort.py
# Реализация алгоритма сортировки кучей с комментариями и оценками сложности

from heap import Heap  # O(1) импорт реализации кучи


def heapsort(array):  # O(n log n) в среднем и худшем случае для сортировки n элементов
    """Сортировка кучей (Heapsort)."""  # O(1)
    if len(array) <= 1:  # O(1) проверка тривиальных случаев
        return array  # O(1) возвращаем тот же массив

    # Строим Max-Heap (чтобы извлечение элементов происходило в порядке убывания)
    heap = Heap(is_min=False)  # O(1) создание объекта Max-Heap
    heap.build_heap(array)  # O(n) построение куче из массива

    sorted_array = []  # O(1) результирующий список
    while len(heap.get_heap()) > 0:  # O(n) внешний цикл — выполняется n раз
        sorted_array.append(heap.extract())  # O(log n) извлечение корня и добавление

    # Результат будет в порядке убывания, так что инвертируем массив
    return sorted_array[::-1]  # O(n) разворот массива и возврат отсортированного результата
